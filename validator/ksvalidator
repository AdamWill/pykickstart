#!/usr/bin/python2
#
# Chris Lumens <clumens@redhat.com>
#
# Copyright 2005 Red Hat, Inc.
#
# This software may be freely redistributed under the terms of the GNU
# general public license.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#

import os
import sys
import warnings
from pykickstart.data import *
from pykickstart.parser import *

if len(sys.argv) != 2:
    print "usage: %s ksfile" % sys.argv[0]
    os._exit(1)

ksdata = KickstartData()
kshandlers = KickstartHandlers(ksdata)
ksparser = KickstartParser(ksdata, kshandlers)

# turn DeprecationWarnings into errors
warnings.filterwarnings("error")

try:
    ksparser.readKickstart(sys.argv[1])
except DeprecationWarning, msg:
    print "File uses a deprecated option or command.\n%s" % msg
    os._exit(1)
except (KickstartParseError, KickstartValueError), msg:
    print msg
    os._exit(1)
except KickstartError:
    print "General kickstart error in input file"
    os._exit(1)
except:
    print "General error in input file"
    os._exit(1)

os._exit(0)
